# ==============================================================================
# Prefect Configuration - Hotel AI System
# ==============================================================================

# Prefect project name
name: hotel-ai-system

# ==============================================================================
# Deployments
# ==============================================================================

deployments:
  # Hello flow (for testing)
  - name: hello-deployment
    entrypoint: src/flow/hello_flow.py:hello_flow
    work_pool:
      name: local-pool
      work_queue_name: default
    parameters: {}
    tags:
      - hotel
      - test

  # --------------------------------------------------------------------------
  # FLOW 1: Booking Success Notification
  # Notify customer when booking is confirmed
  # --------------------------------------------------------------------------
  - name: notify-booking-success
    entrypoint: src/flow/email_flow.py:notify_booking_success_flow
    work_pool:
      name: local-pool
    tags:
      - hotel
      - email
      - booking
      - customer

  # --------------------------------------------------------------------------
  # FLOW 2: Check-in / Check-out Notification
  # Notify customer for room ready or checkout reminder
  # --------------------------------------------------------------------------
  - name: notify-checkin-checkout
    entrypoint: src/flow/email_flow.py:notify_checkin_checkout_flow
    work_pool:
      name: local-pool
    tags:
      - hotel
      - email
      - checkin
      - checkout
      - customer

  # --------------------------------------------------------------------------
  # FLOW 3: Staff Attendance Check
  # Send attendance report to manager
  # --------------------------------------------------------------------------
  - name: notify-staff-attendance
    entrypoint: src/flow/email_flow.py:notify_staff_attendance_flow
    work_pool:
      name: local-pool
    tags:
      - hotel
      - email
      - staff
      - attendance
      - hr

  # --------------------------------------------------------------------------
  # FLOW 4: ML Report Analysis
  # Send analysis reports from ML service
  # --------------------------------------------------------------------------
  - name: send-ml-report
    entrypoint: src/flow/email_flow.py:send_ml_report_flow
    work_pool:
      name: local-pool
    tags:
      - hotel
      - email
      - ml
      - analytics
      - report

  # --------------------------------------------------------------------------
  # FLOW 5: Promotional Email
  # Send promotional offers to customers
  # --------------------------------------------------------------------------
  - name: send-promotional-email
    entrypoint: src/flow/email_flow.py:send_promotional_email_flow
    work_pool:
      name: local-pool
    tags:
      - hotel
      - email
      - marketing
      - promotion

# ==============================================================================
# Pull step - How to get the code
# ==============================================================================

pull:
  - prefect.deployments.steps.set_working_directory:
      directory: /app
